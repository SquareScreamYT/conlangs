<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Chielbaric Documentation</title>
  <style>
    body {
      background-color: #0d1117;
      margin: 50px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .admonition {
      border-left: 4px solid #888;
      padding: 0.7em 1em;
      margin: 1.2em 0;
      border-radius: 6px;
      background: #161b22;
    }
    .admonition-title {
      font-weight: bold;
      margin-bottom: 0.4em;
    }

    .admonition.note { border-color: #4ea1ff; }
    .admonition.tip { border-color: #4caf50; }
    .admonition.important { border-color: #ffb300; }
    .admonition.warning { border-color: #ff5722; }
    .admonition.caution { border-color: #f44336; }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.8.1/github-markdown-dark.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div id="markdown-body" class="markdown-body"></div>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    const admonitionExtension = {
      name: "admonition",
      level: "block",
      start(src) {
        return src.match(/^>\s*\[!/m)?.index;
      },
      tokenizer(src) {
        const rule = /^>\s*\[!(\w+)\]\s*\n?((?:>.*\n?)*)/;
        const match = rule.exec(src);

        if (match) {
          const type = match[1].toLowerCase();
          const body = match[2].replace(/^>\s?/gm, "").trim();

          return {
            type: "admonition",
            raw: match[0],
            kind: type,
            text: body,
            tokens: this.lexer.blockTokens(body)
          };
        }
      },
      renderer(token) {
        const titles = {
          note: "Note",
          tip: "Tip",
          important: "Important",
          warning: "Warning",
          caution: "Caution"
        };

        return `
    <div class="markdown-alert markdown-alert-${token.kind}">
      <p class="markdown-alert-title">${titles[token.kind]}</p>
      ${this.parser.parse(token.tokens)}
    </div>
        `;
      }
    };

    marked.use({ extensions: [admonitionExtension] });

    async function getMarkdownSource(url) {
      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const markdownText = await response.text();
        return markdownText;
      } catch (error) {
        console.error('Error fetching Markdown:', error);
        return null;
      }
    }

    getMarkdownSource('chielbaric.md')
      .then(markdown => {
        if (markdown !== null) {
          document.getElementById('markdown-body').innerHTML =
      marked.parse(markdown);
        }
      });
  </script>
</body>
</html>